diff -ru orig/configure.ac diff/configure.ac
--- orig/configure.ac	2021-09-29 21:16:29.000000000 +0200
+++ diff/configure.ac	2021-12-13 16:02:13.112448525 +0100
@@ -80,11 +80,13 @@
 AC_SUBST(GLIB_CFLAGS)
 AC_SUBST(GLIB_LIBS)
 
-PKG_CHECK_MODULES(LIBJS, [mozjs-78])
-
-AC_SUBST(LIBJS_CFLAGS)
-AC_SUBST(LIBJS_CXXFLAGS)
-AC_SUBST(LIBJS_LIBS)
+AS_IF([test x${enable_polkitd} = yes], [
+  PKG_CHECK_MODULES(LIBJS, [mozjs-78])
+
+  AC_SUBST(LIBJS_CFLAGS)
+  AC_SUBST(LIBJS_CXXFLAGS)
+  AC_SUBST(LIBJS_LIBS)
+])
 
 EXPAT_LIB=""
 AC_ARG_WITH(expat, [  --with-expat=<dir>      Use expat from here],
@@ -238,6 +240,15 @@
 AM_CONDITIONAL(HAVE_SYSTEMD, [test -n "$systemdsystemunitdir"])
 
 dnl ---------------------------------------------------------------------------
+dnl - Disable polkitd when using library alone
+dnl ---------------------------------------------------------------------------
+
+AC_ARG_ENABLE([polkitd],
+              [AS_HELP_STRING([--disable-polkitd], [Do not build polkitd])],
+              [enable_polkitd=$enableval], [enable_polkitd=yes])
+AM_CONDITIONAL(BUILD_POLKITD, [test x${enable_polkitd} = yes])
+
+dnl ---------------------------------------------------------------------------
 dnl - User for running polkitd
 dnl ---------------------------------------------------------------------------

@@ -584,6 +595,7 @@
         Session tracking:           ${SESSION_TRACKING}
         PAM support:                ${have_pam}
         systemdsystemunitdir:       ${systemdsystemunitdir}
+        polkitd:                    ${enable_polkitd}
         polkitd user:               ${POLKITD_USER}"
 
 if test "$have_pam" = yes ; then
diff -ru orig/src/Makefile.am diff/src/Makefile.am
--- orig/src/Makefile.am	2021-01-05 15:42:11.000000000 +0100
+++ diff/src/Makefile.am	2021-12-13 16:02:44.148577381 +0100
@@ -1,5 +1,9 @@
 
-SUBDIRS = polkit polkitbackend polkitagent programs
+SUBDIRS = polkit polkitagent programs
+
+if BUILD_POLKITD
+SUBDIRS += polkitbackend
+endif
 
 if BUILD_EXAMPLES
 SUBDIRS += examples
diff -ru orig/src/polkitagent/Makefile.am diff/src/polkitagent/Makefile.am
--- orig/src/polkitagent/Makefile.am	2021-01-05 15:42:11.000000000 +0100
+++ diff/src/polkitagent/Makefile.am	2021-12-13 16:04:35.701041470 +0100
@@ -79,6 +79,7 @@
 
 libpolkit_agent_1_la_LDFLAGS = -export-symbols-regex '(^polkit_.*)'
 
+if !POLKIT_AUTHFW_NONE
 libprivdir = $(prefix)/lib/polkit-1
 libpriv_PROGRAMS = polkit-agent-helper-1
 
@@ -113,6 +114,8 @@
 	$(AM_LDFLAGS)							\
 	$(NULL)
 
+endif # !POLKIT_AUTHFW_NONE
+
 if HAVE_INTROSPECTION
 
 girdir = $(INTROSPECTION_GIRDIR)
@@ -142,6 +145,7 @@
 
 endif # HAVE_INTROSPECTION
 
+if !POLKIT_AUTHFW_NONE
 # polkit-agent-helper-1 need to be setuid root because it's used to
 # authenticate not only the invoking user, but possibly also root
 # and/or other users.
@@ -149,6 +153,8 @@
 install-data-hook:
 	-chown root $(DESTDIR)$(libprivdir)/polkit-agent-helper-1
 	-chmod 4755 $(DESTDIR)$(libprivdir)/polkit-agent-helper-1
+endif # !POLKIT_AUTHFW_NONE
+
 
 EXTRA_DIST =				\
	polkitagentmarshal.list		\
diff -ru orig/test/Makefile.am diff/test/Makefile.am
--- orig/test/Makefile.am	2021-01-05 15:42:11.000000000 +0100
+++ diff/test/Makefile.am	2021-12-13 16:05:06.049167730 +0100
@@ -1,7 +1,11 @@
 
-SUBDIRS = mocklibc . polkit polkitbackend
+SUBDIRS = mocklibc . polkit
 AM_CFLAGS = $(GLIB_CFLAGS)
 
+if BUILD_POLKITD
+SUBDIRS += polkitbackend
+endif
+
 noinst_LTLIBRARIES = libpolkit-test-helper.la
 libpolkit_test_helper_la_SOURCES = polkittesthelper.c polkittesthelper.h
 libpolkit_test_helper_la_LIBADD = $(GLIB_LIBS)
